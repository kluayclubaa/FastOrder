(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(5155);r(2115);var a=r(9708),i=r(2085),n=r(9434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:i,asChild:l=!1,...o}=e,c=l?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,n.cn)(d({variant:r,size:i,className:t})),...o})}},1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5155);r(2115);var a=r(9434);function i(e){let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},3810:(e,t,r)=>{Promise.resolve().then(r.bind(r,6452))},5339:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5610:(e,t,r)=>{"use strict";r.d(t,{H9:()=>i.H9,IG:()=>u,db:()=>c,j2:()=>o,x7:()=>i.x7});var s=r(3915),a=r(6203),i=r(5317),n=r(858),d=r(1427);let l=(0,s.Wp)({apiKey:"AIzaSyBdnWr8bkOF5oP2gSsjo9pXbrZbJO-QzDc",authDomain:"fastorder-8f143.firebaseapp.com",projectId:"fastorder-8f143",storageBucket:"fastorder-8f143.firebasestorage.app",messagingSenderId:"827965800193",appId:"1:827965800193:web:1d9ff91b5f6adb90bf6500",measurementId:"G-2LXXJM6W59"}),o=(0,a.xI)(l),c=(0,i.aU)(l);new a.HF;let u=(0,n.c7)(l);(0,d.Uz)(l)},6452:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(5155),a=r(2115),i=r(5695),n=r(5610),d=r(5317),l=r(6203),o=r(2523),c=r(285),u=r(6695),m=r(2085),g=r(9434);let p=(0,m.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function x(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,g.cn)(p({variant:r}),t),...a})}function f(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,g.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...r})}var v=r(5339);let h=(0,r(9946).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var b=r(1154);function y(){let[e,t]=(0,a.useState)(""),[r,m]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),[k,E]=(0,a.useState)([]),[_,z]=(0,a.useState)(""),S=(0,i.useRouter)(),A=/^0[6-9]\d{8}$/,F=/^[\u0E00-\u0E7F\w\s]{2,50}$/,I=/^[\u0E00-\u0E7F\w\s,.-]{2,30}$/;(0,a.useEffect)(()=>{let e=(0,l.hg)(n.j2,e=>{e?N(e.uid):S.push("/login")});return()=>e()},[S]),(0,a.useEffect)(()=>{if(w){let e=(0,d.H9)(n.db,"users",w),t=(0,d.aQ)(e,e=>{let t=e.data();(null==t?void 0:t.storeInfoComplete)&&S.push("/pricing")});return()=>t()}},[w,S]);let T=()=>{let t=[];return e.trim()?F.test(e.trim())||t.push({field:"storeName",message:"ชื่อร้านต้องมี 2-50 ตัวอักษร และประกอบด้วยตัวอักษรไทย/อังกฤษ ตัวเลข และช่องว่างเท่านั้น"}):t.push({field:"storeName",message:"กรุณากรอกชื่อร้าน"}),r.trim()?A.test(r)||t.push({field:"phone",message:"รูปแบบเบอร์โทรไม่ถูกต้อง (ตัวอย่าง: 0812345678, 0612345678)"}):t.push({field:"phone",message:"กรุณากรอกเบอร์โทร"}),g.trim()?I.test(g.trim())||t.push({field:"storeType",message:"ประเภทร้านต้องมี 2-30 ตัวอักษร (ตัวอย่าง: อาหาร, คาเฟ่, ของหวาน)"}):t.push({field:"storeType",message:"กรุณากรอกประเภทร้าน"}),t},C=async t=>{if(t.preventDefault(),!w)return;E([]),z("");let s=T();if(s.length>0)return void E(s);j(!0);try{let t=(0,d.H9)(n.db,"users",w);await (0,d.mZ)(t,{storeName:e.trim(),phone:r.trim(),storeType:g.trim(),storeInfoComplete:!0}),z("บันทึกข้อมูลสำเร็จ! กำลังไปหน้าเลือกแพ็กเกจ..."),setTimeout(()=>{S.push("/pricing")},1500)}catch(e){console.error("Error updating store info:",e),E([{field:"general",message:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง"}])}finally{j(!1)}},Z=e=>{var t;return null==(t=k.find(t=>t.field===e))?void 0:t.message};return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-orange-50 to-yellow-50 px-4",children:(0,s.jsxs)(u.Zp,{className:"w-full max-w-lg shadow-xl",children:[(0,s.jsx)(u.aR,{children:(0,s.jsx)(u.ZB,{className:"text-xl text-center",children:"ข้อมูลร้านค้า"})}),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsxs)(u.Wu,{className:"space-y-4",children:[k.some(e=>"general"===e.field)&&(0,s.jsxs)(x,{variant:"destructive",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)(f,{children:Z("general")})]}),_&&(0,s.jsxs)(x,{className:"border-green-200 bg-green-50 text-green-800",children:[(0,s.jsx)(h,{className:"h-4 w-4"}),(0,s.jsx)(f,{children:_})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"ชื่อร้าน"}),(0,s.jsx)(o.p,{type:"text",value:e,onChange:e=>{t(e.target.value.replace(/[^\u0E00-\u0E7F\w\s]/g,"").slice(0,50))},className:Z("storeName")?"border-red-500":"",placeholder:"กรอกชื่อร้านค้าของคุณ",required:!0}),Z("storeName")&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Z("storeName")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"เบอร์โทรร้าน"}),(0,s.jsx)(o.p,{type:"tel",value:r,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length<=10&&m(t)},className:Z("phone")?"border-red-500":"",placeholder:"เช่น 0812345678",required:!0}),Z("phone")&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Z("phone")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"ประเภทร้าน"}),(0,s.jsx)(o.p,{type:"text",placeholder:"เช่น อาหาร, คาเฟ่, ของหวาน",value:g,onChange:e=>{p(e.target.value.replace(/[^\u0E00-\u0E7F\w\s,.-]/g,"").slice(0,30))},className:Z("storeType")?"border-red-500":"",required:!0}),Z("storeType")&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:Z("storeType")})]})]}),(0,s.jsx)(u.wL,{children:(0,s.jsx)(c.$,{type:"submit",className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600",disabled:y,children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"กำลังบันทึก..."]}):"บันทึกข้อมูลร้านค้า"})})]})]})})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>c});var s=r(5155);r(2115);var a=r(9434);function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,122,234,955,352,441,684,358],()=>t(3810)),_N_E=e.O()}]);