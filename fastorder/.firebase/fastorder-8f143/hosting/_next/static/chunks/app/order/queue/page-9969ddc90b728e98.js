(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{646:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5610:(e,t,s)=>{"use strict";s.d(t,{H9:()=>r.H9,db:()=>o,j2:()=>i,x7:()=>r.x7});var l=s(3915),a=s(6203),r=s(5317),n=s(858),c=s(1427);let d=(0,l.Wp)({apiKey:"AIzaSyBdnWr8bkOF5oP2gSsjo9pXbrZbJO-QzDc",authDomain:"fastorder-8f143.firebaseapp.com",projectId:"fastorder-8f143",storageBucket:"fastorder-8f143.firebasestorage.app",messagingSenderId:"827965800193",appId:"1:827965800193:web:1d9ff91b5f6adb90bf6500",measurementId:"G-2LXXJM6W59"}),i=(0,a.xI)(d),o=(0,r.aU)(d);new a.HF,(0,n.c7)(d),(0,c.Uz)(d)},5747:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]])},6308:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},6474:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},6652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var l=s(5155),a=s(2115),r=s(5695),n=s(4186),c=s(5747),d=s(646),i=s(4416),o=s(7550);let x=(0,s(9946).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var m=s(6474),u=s(6308),h=s(5610),g=s(5317);function b(){var e;let[t,s]=(0,a.useState)([]),[b,p]=(0,a.useState)(null),[j,f]=(0,a.useState)(!0),[y,N]=(0,a.useState)(""),[v,w]=(0,a.useState)(null),[A,k]=(0,a.useState)(new Set),[C,S]=(0,a.useState)(null),I=(0,r.useRouter)(),D=(0,r.useSearchParams)(),[_,E]=(0,a.useState)({show:!1,order:null,type:"completed"}),M=D.get("restaurantId"),O=D.get("orderId"),F=D.get("table");(0,a.useEffect)(()=>{let e=D.get("userId")||localStorage.getItem("userId");if(e&&S(e),!M){N("ข้อมูลร้านอาหารไม่ถูกต้อง"),f(!1);return}(async()=>{try{let e=await (0,g.GG)((0,g.P)((0,g.rJ)(h.db,"users"),(0,g._M)("__name__","==",M)));e.empty||w(e.docs[0].data())}catch(e){console.error("Error fetching restaurant info:",e)}})(),(async()=>{let t=F;if(O&&!t)try{(0,g.H9)(h.db,"users",M,"orders",O);let e=await (0,g.GG)((0,g.P)((0,g.rJ)(h.db,"users",M,"orders"),(0,g._M)("__name__","==",O)));e.empty||(t=e.docs[0].data().table)}catch(e){console.error("Error fetching order for table:",e)}if(!e&&!t){N("ไม่พบข้อมูลผู้ใช้หรือโต๊ะ"),f(!1);return}let l=e?(0,g.P)((0,g.rJ)(h.db,"users",M,"orders"),(0,g._M)("userId","==",e)):(0,g.P)((0,g.rJ)(h.db,"users",M,"orders"),(0,g._M)("table","==",t));return(0,g.aQ)(l,e=>{let t=[],l=null;if(e.forEach(e=>{let s=e.data(),a={id:e.id,...s};t.push(a),O&&e.id===O&&(l=a)}),t.sort((e,t)=>{var s,l;let a=(null==(s=e.createdAt)?void 0:s.toDate)?e.createdAt.toDate().getTime():0;return((null==(l=t.createdAt)?void 0:l.toDate)?t.createdAt.toDate().getTime():0)-a}),s(t),l)p(l),k(new Set([l.id]));else if(t.length>0){let e=t[0];p(e),k(new Set([e.id]))}f(!1)},e=>{console.error("Error listening to orders:",e),N("เกิดข้อผิดพลาดในการโหลดข้อมูล"),f(!1)})})()},[M,O,F,C]),(0,a.useEffect)(()=>{t.forEach(e=>{if(("completed"===e.status||"cancelled"===e.status)&&!_.show){var t;let s=sessionStorage.getItem("order-".concat(e.id,"-dismissed")),l=(null==(t=e.updatedAt)?void 0:t.toDate)?e.updatedAt.toDate().getTime():0,a=sessionStorage.getItem("session-start-time");a||sessionStorage.setItem("session-start-time",Date.now().toString());let r=Number.parseInt(a||Date.now().toString());!s&&r-l<3e4&&E({show:!0,order:e,type:e.status})}})},[t,_.show]);let q=e=>{switch(e){case"pending":return{title:"รอการยืนยัน",description:"ร้านค้ากำลังตรวจสอบออเดอร์ของคุณ",color:"yellow",bgColor:"bg-yellow-50",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",badgeColor:"bg-yellow-100 text-yellow-800",icon:(0,l.jsx)(n.A,{className:"h-8 w-8"})};case"cooking":return{title:"กำลังเตรียมอาหาร",description:"ร้านค้ากำลังปรุงอาหารให้คุณ",color:"orange",bgColor:"bg-orange-50",iconBg:"bg-orange-100",iconColor:"text-orange-600",badgeColor:"bg-orange-100 text-orange-800",icon:(0,l.jsx)(c.A,{className:"h-8 w-8"})};case"served":return{title:"เสิร์ฟแล��ว",description:"อาหารของคุณพร้อมเสิร์ฟแล้ว",color:"green",bgColor:"bg-green-50",iconBg:"bg-green-100",iconColor:"text-green-600",badgeColor:"bg-green-100 text-green-800",icon:(0,l.jsx)(d.A,{className:"h-8 w-8"})};case"completed":return{title:"เสร็จสิ้น",description:"ขอบคุณที่ใช้บริการ",color:"green",bgColor:"bg-green-50",iconBg:"bg-green-100",iconColor:"text-green-600",badgeColor:"bg-green-100 text-green-800",icon:(0,l.jsx)(d.A,{className:"h-8 w-8"})};case"cancelled":return{title:"ยกเลิกแล้ว",description:"ออเดอร์นี้ถูกยกเลิก",color:"red",bgColor:"bg-red-50",iconBg:"bg-red-100",iconColor:"text-red-600",badgeColor:"bg-red-100 text-red-800",icon:(0,l.jsx)(i.A,{className:"h-8 w-8"})};default:return{title:"ไม่ทราบสถานะ",description:"",color:"gray",bgColor:"bg-gray-50",iconBg:"bg-gray-100",iconColor:"text-gray-600",badgeColor:"bg-gray-100 text-gray-800",icon:(0,l.jsx)(n.A,{className:"h-8 w-8"})}}},B=e=>{var t,s,l;let a=(null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate():new Date,r=(null==v?void 0:v.storeName)||(null==v?void 0:v.restaurantName)||"ร้านอาหาร",n="\n=================================\n".concat(r,"\n=================================\nวันที่: ").concat(a.toLocaleDateString("th-TH",{year:"numeric",month:"2-digit",day:"2-digit"}),"\nเวลา: ").concat(a.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),"\nโต๊ะ: ").concat(e.table,"\nออเดอร์: #").concat(e.id.slice(-6).toUpperCase(),"\n").concat(C?"ลูกค้า: ".concat(C.slice(-6).toUpperCase()):"","\n=================================\n\nรายการอาหาร:\n");return null==(s=e.items)||s.forEach((e,t)=>{var s;let l=(e.price+((null==(s=e.selectedOptions)?void 0:s.reduce((e,t)=>e+t.price,0))||0))*e.quantity;n+="".concat(t+1,". ").concat(e.name," x").concat(e.quantity,"\n"),n+="   ฿".concat(e.price.toFixed(2)),e.selectedOptions&&e.selectedOptions.length>0&&(n+="\n   ตัวเลือก: ".concat(e.selectedOptions.map(e=>"".concat(e.name," (+฿").concat(e.price,")")).join(", "))),e.specialInstructions&&(n+="\n   หมายเหตุ: ".concat(e.specialInstructions)),n+="\n   รวม: ฿".concat(l.toFixed(2),"\n\n")}),n+="=================================\nยอดรวมทั้งสิ้น: ฿".concat((null==(l=e.totalAmount)?void 0:l.toFixed(2))||"0.00","\n=================================\n\nขอบคุณที่ใช้บริการ\n")},H=e=>{let t=new Blob(["\uFEFF"+B(e)],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download="receipt-".concat(e.id.slice(-6),"-").concat(C?C.slice(-6):"guest",".txt"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)},L=()=>{if(M){var e;let s=F||(null==(e=t[0])?void 0:e.table)||"1";I.push("/order?id=".concat(M,"&table=").concat(s))}},U=e=>{let t=new Set(A);t.has(e)?t.delete(e):t.add(e),k(t)},T=e=>{p(e),k(new Set([e.id]))};return j?(0,l.jsx)("div",{className:"min-h-screen bg-blue-400 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center text-white",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"กำลังโหลดสถานะ..."})]})}):y?(0,l.jsx)("div",{className:"min-h-screen bg-blue-400 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center max-w-md w-full",children:[(0,l.jsx)("div",{className:"text-red-500 mb-6",children:(0,l.jsx)(i.A,{className:"h-16 w-16 mx-auto"})}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"เกิดข้อผิดพลาด"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:y}),(0,l.jsx)("button",{onClick:L,className:"px-6 py-3 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500",children:"กลับไปสั่งอาหาร"})]})}):0===t.length?(0,l.jsx)("div",{className:"min-h-screen bg-blue-400 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center max-w-md w-full",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"ไม่พบออเดอร์"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"ไม่พบออเดอร์สำหรับโต๊ะนี้"}),(0,l.jsx)("button",{onClick:L,className:"px-6 py-3 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500",children:"สั่งอาหาร"})]})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,l.jsx)("div",{className:"bg-blue-400 text-white shadow-lg",children:(0,l.jsx)("div",{className:"max-w-md mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("button",{onClick:L,className:"mr-3 p-2 rounded-full hover:bg-blue-500",children:(0,l.jsx)(o.A,{className:"h-6 w-6"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"สถานะออเดอร์"}),(0,l.jsx)("p",{className:"text-blue-100",children:C?"ออเดอร์ของคุณ • ".concat(t.filter(e=>"completed"!==e.status&&"cancelled"!==e.status).length," ออเดอร์"):"โต๊ะ ".concat(null==(e=t[0])?void 0:e.table," • ").concat(t.filter(e=>"completed"!==e.status&&"cancelled"!==e.status).length," ออเดอร์")})]})]})})}),(0,l.jsxs)("div",{className:"max-w-md mx-auto p-4",children:[b&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-3",children:"ออเดอร์ปัจจุบัน"}),(0,l.jsx)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border-2 border-blue-200",children:(()=>{var e;let t=q(b.status);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"p-6 text-center ".concat(t.bgColor),children:[(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4 ".concat(t.iconBg," ").concat(t.iconColor),children:t.icon}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.title}),(0,l.jsx)("p",{className:"text-gray-600",children:t.description}),"cooking"===b.status&&b.queueNumber&&(0,l.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-xl border-2 border-blue-200 shadow-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"ออเดอร์นี้อยู่ในคิว"}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["#",b.queueNumber]})})]})]}),(0,l.jsx)("div",{className:"p-4 bg-gray-50",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["ออเดอร์ #",b.id.slice(-6).toUpperCase()]}),(0,l.jsxs)("span",{className:"text-lg font-bold text-blue-600",children:["฿",(null==(e=b.totalAmount)?void 0:e.toFixed(2))||"0.00"]})]})})]})})()})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-bold text-gray-800",children:["ออเดอร์ที่กำลังดำเนินการ (",t.filter(e=>"completed"!==e.status&&"cancelled"!==e.status).length,")"]}),t.filter(e=>"completed"!==e.status&&"cancelled"!==e.status).map(e=>{var t,s,a,r,n;let c=q(e.status),i=A.has(e.id),o=(null==b?void 0:b.id)===e.id;return(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden ".concat(o?"border-2 border-blue-300":"border border-gray-200"),children:[(0,l.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>U(e.id),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat("pending"===e.status?"bg-yellow-500":"cooking"===e.status?"bg-orange-500":"served"===e.status?"bg-blue-500":"completed"===e.status?"bg-green-500":"bg-red-500")}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"font-bold text-gray-800",children:["#",e.id.slice(-6).toUpperCase()]}),o&&(0,l.jsx)("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"ปัจจุบัน"})]}),(0,l.jsxs)("div",{className:"flex items-center mt-1",children:[(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(c.badgeColor),children:c.title}),"cooking"===e.status&&e.queueNumber&&(0,l.jsxs)("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["คิว #",e.queueNumber]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("div",{className:"text-right mr-3",children:[(0,l.jsxs)("div",{className:"font-bold text-blue-600",children:["฿",(null==(t=e.totalAmount)?void 0:t.toFixed(2))||"0.00"]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:(null==(s=e.createdAt)?void 0:s.toDate)?new Date(e.createdAt.toDate()).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):"-"})]}),i?(0,l.jsx)(x,{className:"h-5 w-5 text-gray-400"}):(0,l.jsx)(m.A,{className:"h-5 w-5 text-gray-400"})]})]})}),i&&(0,l.jsxs)("div",{className:"border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-xl",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"เวลาสั่ง"}),(0,l.jsx)("span",{className:"font-bold",children:(null==(a=e.createdAt)?void 0:a.toDate)?new Date(e.createdAt.toDate()).toLocaleString("th-TH",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-xl",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium",children:"จำนวนรายการ"}),(0,l.jsxs)("span",{className:"font-bold",children:[(null==(r=e.items)?void 0:r.length)||0," รายการ"]})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h4",{className:"font-bold text-lg mb-3",children:"รายการอาหาร"}),(0,l.jsx)("div",{className:"space-y-2",children:null==(n=e.items)?void 0:n.map((e,t)=>{var s;return(0,l.jsxs)("div",{className:"flex justify-between items-start p-3 bg-gray-50 rounded-xl",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("span",{className:"font-bold",children:e.name}),(0,l.jsxs)("span",{className:"text-blue-600 font-bold ml-2",children:["x",e.quantity]}),e.selectedOptions&&e.selectedOptions.length>0&&(0,l.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["(",e.selectedOptions.map(e=>e.name).join(", "),")"]}),e.specialInstructions&&(0,l.jsxs)("div",{className:"text-sm text-gray-600 italic mt-1",children:['"',e.specialInstructions,'"']})]}),(0,l.jsxs)("span",{className:"font-bold text-blue-600",children:["฿",((e.price+((null==(s=e.selectedOptions)?void 0:s.reduce((e,t)=>e+t.price,0))||0))*e.quantity).toFixed(2)]})]},t)})})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[!o&&(0,l.jsx)("button",{onClick:()=>T(e),className:"flex-1 px-4 py-3 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500 transition-colors",children:"ตั้งเป็นออเดอร์ปัจจุบัน"}),"completed"===e.status&&(0,l.jsxs)("button",{onClick:()=>H(e),className:"flex-1 flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors",children:[(0,l.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"ดาวน์โหลดใบเสร็จ"]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-4",children:[(0,l.jsx)("h4",{className:"font-bold text-sm mb-4",children:"ขั้นตอนการเตรียมอาหาร"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center ".concat(["pending","cooking","served","completed"].includes(e.status)?"text-green-600":"text-gray-400"),children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex items-center justify-center ".concat(["pending","cooking","served","completed"].includes(e.status)?"bg-green-500":"bg-gray-300"),children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-white"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"ได้รับออเดอร์"})]}),(0,l.jsxs)("div",{className:"flex items-center ".concat(["cooking","served","completed"].includes(e.status)?"text-green-600":"text-gray-400"),children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex items-center justify-center ".concat(["cooking","served","completed"].includes(e.status)?"bg-green-500":"bg-gray-300"),children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-white"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"ยืนยันออเดอร์"})]}),(0,l.jsxs)("div",{className:"flex items-center ".concat(["served","completed"].includes(e.status)?"text-green-600":"text-gray-400"),children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex items-center justify-center ".concat(["served","completed"].includes(e.status)?"bg-green-500":"bg-gray-300"),children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-white"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"เตรียมอาหารเสร็จ"})]}),(0,l.jsxs)("div",{className:"flex items-center ".concat("completed"===e.status?"text-green-600":"text-gray-400"),children:[(0,l.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex items-center justify-center ".concat("completed"===e.status?"bg-green-500":"bg-gray-300"),children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-white"})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"เสร็จสิ้น"})]})]})]})]})]},e.id)})]}),_.show&&_.order&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 text-center",children:[(0,l.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ".concat("completed"===_.type?"bg-green-100":"bg-red-100"),children:"completed"===_.type?(0,l.jsx)(d.A,{className:"h-8 w-8 text-green-600"}):(0,l.jsx)(i.A,{className:"h-8 w-8 text-red-600"})}),(0,l.jsx)("h3",{className:"text-xl font-bold mb-2",children:"completed"===_.type?"ออเดอร์เสร็จสิ้น!":"ออเดอร์ถูกยกเลิก"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"completed"===_.type?"ขอบคุณที่ใช้บริการ คุณสามารถดาวน์โหลดใบเสร็จได้":"ออเดอร์ของคุณถูกยกเลิกแล้ว"}),(0,l.jsxs)("div",{className:"space-y-3",children:["completed"===_.type&&(0,l.jsxs)("button",{onClick:()=>{H(_.order),sessionStorage.setItem("order-".concat(_.order.id,"-dismissed"),"true"),E({show:!1,order:null,type:"completed"})},className:"w-full flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors",children:[(0,l.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"ดาวน์โหลดใบเสร็จ"]}),(0,l.jsx)("button",{onClick:()=>{_.order&&sessionStorage.setItem("order-".concat(_.order.id,"-dismissed"),"true"),E({show:!1,order:null,type:"completed"})},className:"w-full px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-bold hover:bg-gray-300 transition-colors",children:"ปิด"}),(0,l.jsx)("button",{onClick:()=>{_.order&&sessionStorage.setItem("order-".concat(_.order.id,"-dismissed"),"true"),L()},className:"w-full px-4 py-3 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500 transition-colors",children:"สั่งอาหารเพิ่ม"})]})]})}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsx)("p",{className:"text-sm text-gray-500 bg-white rounded-xl p-3",children:"\uD83D\uDCF1 หน้านี้จะอัปเดตสถานะอัตโนมัติ"})}),(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)("button",{onClick:L,className:"w-full px-6 py-4 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500 transition-colors",children:"สั่งอาหารเพิ่ม"})})]})]})}function p(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),s=t.get("restaurantId"),n=t.get("orderId");return((0,a.useEffect)(()=>{s&&n||e.push("/")},[s,n,e]),s&&n)?(0,l.jsx)(b,{}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"ไม่พบข้อมูลออเดอร์"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"กรุณาสแกน QR Code ใหม่อีกครั้ง"})]})})}},7550:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7970:(e,t,s)=>{Promise.resolve().then(s.bind(s,6652))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,122,234,432,441,684,358],()=>t(7970)),_N_E=e.O()}]);