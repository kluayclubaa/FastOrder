(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{2457:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var l=t(5155),a=t(2115),r=t(5695),i=t(4186);let n=(0,t(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var c=t(7809),d=t(7924),o=t(8564),x=t(4616),m=t(4416),h=t(7712),u=t(3052),b=t(5610),p=t(5317);function g(){let[e,s]=(0,a.useState)([]),[t,g]=(0,a.useState)([]),[f,j]=(0,a.useState)([]),[N,v]=(0,a.useState)("all"),[w,y]=(0,a.useState)(""),[k,A]=(0,a.useState)([]),[S,C]=(0,a.useState)(!1),[I,_]=(0,a.useState)(!0),[D,O]=(0,a.useState)(null),[q,E]=(0,a.useState)(null),[F,L]=(0,a.useState)([]),[M,z]=(0,a.useState)(""),[J,U]=(0,a.useState)(null),[R,P]=(0,a.useState)(null),[G,H]=(0,a.useState)(1),[Q,W]=(0,a.useState)(!1),X=(0,r.useRouter)(),B=(0,r.useSearchParams)(),K=B.get("id"),V=B.get("table")||"1";(0,a.useEffect)(()=>{let e=e=>{Q||(e.preventDefault(),e.returnValue="")},s=e=>{window.location.pathname.includes("/order/queue")||Q||(e.preventDefault(),window.history.pushState(null,"",window.location.href))};return window.addEventListener("beforeunload",e),window.addEventListener("popstate",s),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",s)}},[Q]),(0,a.useEffect)(()=>{if(K&&V){let e="order_".concat(K,"_").concat(V),s=localStorage.getItem(e);s&&(U(s),Z(s))}},[K,V]);let Z=e=>{if(!K)return;let s=(0,p.H9)(b.db,"users",K,"orders",e);return(0,p.aQ)(s,e=>{if(e.exists()){let s=e.data();if(P(s.status),"completed"===s.status||"cancelled"===s.status){let e="order_".concat(K,"_").concat(V);localStorage.removeItem(e),U(null),P(null)}}else{let e="order_".concat(K,"_").concat(V);localStorage.removeItem(e),U(null),P(null)}},e=>{console.error("Error listening to order:",e)})};(0,a.useEffect)(()=>{if(!K)return void _(!1);(async()=>{try{_(!0);let e=await (0,p.GG)((0,p.P)((0,p.rJ)(b.db,"users"),(0,p._M)("__name__","==",K)));if(e.empty){console.error("Restaurant not found"),_(!1);return}let t=e.docs[0].data();O(t);let l=(0,p.P)((0,p.rJ)(b.db,"users",K,"menu"),(0,p._M)("isAvailable","==",!0)),a=await (0,p.GG)(l),r=[],i=new Set;a.forEach(e=>{let s=e.data(),t={id:e.id,...s};r.push(t),s.category&&i.add(s.category)}),s(r),g(r),j(Array.from(i)),_(!1)}catch(e){console.error("Error fetching restaurant data:",e),_(!1)}})()},[K]),(0,a.useEffect)(()=>{let s=e;"all"!==N&&(s=s.filter(e=>e.category===N)),w&&(s=s.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.description.toLowerCase().includes(w.toLowerCase()))),g(s)},[N,w,e]);let T=k.reduce((e,s)=>e+s.price*s.quantity+s.selectedOptions.reduce((e,s)=>e+s.price,0)*s.quantity,0),Y=e=>{E(e),L([]),z(""),H(1)},$=(e,s,t,l)=>{A(a=>{let r=a.findIndex(l=>l.id===e.id&&JSON.stringify(l.selectedOptions)===JSON.stringify(s)&&l.specialInstructions===t);return r>=0?a.map((e,s)=>s===r?{...e,quantity:e.quantity+l}:e):[...a,{...e,quantity:l,selectedOptions:s,specialInstructions:t}]}),E(null),H(1)},ee=(e,s)=>{if(s<1)return void es(e);A(t=>t.map(t=>t.id===e?{...t,quantity:s}:t))},es=e=>{A(s=>s.filter(s=>s.id!==e))},et=()=>{A([])},el=async()=>{if(K&&0!==k.length)try{_(!0),W(!0);let e={items:k.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,selectedOptions:e.selectedOptions,specialInstructions:e.specialInstructions})),table:V,status:"pending",totalAmount:T,createdAt:(0,p.O5)()},s=await (0,p.gS)((0,p.rJ)(b.db,"users",K,"orders"),e),t="order_".concat(K,"_").concat(V);localStorage.setItem(t,s.id),U(s.id),P("pending"),Z(s.id);let l="/order/queue?restaurantId=".concat(K,"&orderId=").concat(s.id);X.push(l),et()}catch(e){console.error("Error submitting order:",e),W(!1)}finally{_(!1)}},ea=()=>{if(J&&K){W(!0);let e="/order/queue?restaurantId=".concat(K,"&orderId=").concat(J);X.push(e)}},er=e=>{switch(e){case"pending":return"รอยืนยัน";case"cooking":return"กำลังปรุง";case"served":return"เสิร์ฟแล้ว";case"completed":return"เสร็จสิ้น";case"cancelled":return"ยกเลิก";default:return e}};if(I)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-blue-400",children:(0,l.jsxs)("div",{className:"text-center text-white",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"กำลังโหลดเมนู..."})]})});if(!K)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-blue-400",children:(0,l.jsxs)("div",{className:"text-center text-white p-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"ไม่พบข้อมูลร้านอาหาร"}),(0,l.jsx)("p",{className:"mb-6",children:"กรุณาสแกน QR Code ใหม่อีกครั้ง"})]})});let ei=e=>{L(s=>s.some(s=>s.id===e.id)?s.filter(s=>s.id!==e.id):[...s,e])},en=e.filter(e=>e.isRecommended);return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100 pb-24",children:[(0,l.jsx)("div",{className:"bg-blue-400 text-white shadow-lg",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:(null==D?void 0:D.storeName)||(null==D?void 0:D.restaurantName)||"ร้านอาหาร"}),(0,l.jsxs)("p",{className:"text-blue-100",children:["โต๊ะ ",V]})]})}),J&&R&&(0,l.jsx)("div",{className:"hidden md:block mr-4",children:(0,l.jsxs)("button",{onClick:ea,className:"flex items-center px-4 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-medium",children:[(0,l.jsx)(i.A,{className:"h-5 w-5 mr-2"}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("div",{className:"text-sm font-bold",children:"ออเดอร์ปัจจุบัน"}),(0,l.jsx)("div",{className:"text-xs",children:er(R)})]}),(0,l.jsx)(n,{className:"h-5 w-5 ml-2"})]})}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("button",{className:"p-3 rounded-full bg-white text-blue-600 relative shadow-lg hover:bg-blue-50 transition-colors",onClick:()=>C(!0),children:[(0,l.jsx)(c.A,{className:"h-7 w-7"}),k.length>0&&(0,l.jsx)("span",{className:"absolute -top-2 -right-2 bg-yellow-400 text-blue-800 text-sm font-bold px-2 py-1 rounded-full min-w-[24px] h-6 flex items-center justify-center",children:k.reduce((e,s)=>e+s.quantity,0)})]})})]})})}),J&&R&&(0,l.jsx)("div",{className:"md:hidden bg-yellow-400 text-blue-800 py-3",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(i.A,{className:"h-5 w-5 mr-2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold",children:"คุณมีออเดอร์ที่กำลังดำเนินการอยู่"}),(0,l.jsxs)("p",{className:"text-sm",children:["สถานะ: ",er(R)]})]})]}),(0,l.jsxs)("button",{onClick:ea,className:"px-4 py-2 bg-blue-400 text-white font-bold rounded-lg hover:bg-blue-500 flex items-center",children:[(0,l.jsx)(n,{className:"h-4 w-4 mr-1"}),"ดูสถานะ"]})]})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"relative max-w-md mx-auto",children:[(0,l.jsx)(d.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 h-6 w-6"}),(0,l.jsx)("input",{type:"text",placeholder:"ค้นหาเมนูที่คุณต้องการ...",className:"w-full pl-12 pr-4 py-4 text-lg border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 shadow-lg",value:w,onChange:e=>y(e.target.value)})]})}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex overflow-x-auto pb-4 gap-4 hide-scrollbar",children:[(0,l.jsx)("button",{className:"whitespace-nowrap px-8 py-4 rounded-xl text-lg font-bold transition-all ".concat("all"===N?"bg-blue-400 text-white shadow-lg transform scale-105":"bg-white text-blue-600 border-2 border-blue-400 hover:bg-blue-50"),onClick:()=>v("all"),children:"ทั้งหมด"}),f.map(e=>(0,l.jsx)("button",{className:"whitespace-nowrap px-8 py-4 rounded-xl text-lg font-bold transition-all ".concat(N===e?"bg-blue-400 text-white shadow-lg transform scale-105":"bg-white text-blue-600 border-2 border-blue-400 hover:bg-blue-50"),onClick:()=>v(e),children:e},e))]})}),en.length>0&&"all"===N&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-blue-600 mb-4 flex items-center",children:[(0,l.jsx)(o.A,{className:"h-6 w-6 mr-2 text-yellow-500"}),"เมนูแนะนำ"]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:en.slice(0,4).map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:scale-105 border-2 border-yellow-400",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"h-48 bg-gray-200 overflow-hidden",children:e.imageUrl?(0,l.jsx)("img",{src:e.imageUrl||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-200",children:(0,l.jsx)("span",{className:"text-blue-400 text-4xl",children:"\uD83C\uDF7D️"})})}),(0,l.jsx)("div",{className:"absolute top-2 right-2 bg-yellow-400 text-blue-800 px-2 py-1 rounded-full text-xs font-bold",children:"แนะนำ"})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-bold text-lg text-gray-800 mb-2",children:e.name}),e.description&&(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["฿",e.price.toFixed(2)]}),(0,l.jsxs)("button",{onClick:()=>Y(e),className:"bg-blue-400 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-500 transition-colors flex items-center",children:[(0,l.jsx)(x.A,{className:"h-5 w-5 mr-1"}),"เพิ่ม"]})]})]})]},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-6",children:"all"===N?"เมนูทั้งหมด":N}),0===t.length?(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-12 text-center shadow-lg",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"ไม่พบเมนูที่คุณค้นหา"}),(0,l.jsx)("p",{className:"text-gray-600",children:"ลองค้นหาด้วยคำอื่น หรือเลือกหมวดหมู่อื่น"})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"h-48 bg-gray-200 overflow-hidden",children:e.imageUrl?(0,l.jsx)("img",{src:e.imageUrl||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:(0,l.jsx)("span",{className:"text-gray-400 text-4xl",children:"\uD83C\uDF7D️"})})}),e.isRecommended&&(0,l.jsxs)("div",{className:"absolute top-2 right-2 bg-yellow-400 text-blue-800 px-2 py-1 rounded-full text-xs font-bold flex items-center",children:[(0,l.jsx)(o.A,{className:"h-3 w-3 mr-1"}),"แนะนำ"]})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"font-bold text-lg text-gray-800 mb-2",children:e.name}),e.description&&(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["฿",e.price.toFixed(2)]}),(0,l.jsxs)("button",{onClick:()=>Y(e),className:"bg-blue-400 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-500 transition-colors flex items-center shadow-lg",children:[(0,l.jsx)(x.A,{className:"h-5 w-5 mr-1"}),"เพิ่ม"]})]})]})]},e.id))})]})]}),S&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-lg bg-white shadow-xl flex flex-col",children:[(0,l.jsxs)("div",{className:"bg-blue-400 text-white p-6 flex items-center",children:[(0,l.jsx)("button",{onClick:()=>C(!1),className:"p-2 rounded-full hover:bg-blue-500 mr-4",children:(0,l.jsx)(m.A,{className:"h-6 w-6"})}),(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"ตะกร้าของคุณ"})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===k.length?(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDED2"}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"ตะกร้าของคุณว่างเปล่า"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"เลือกเมนูอร่อยๆ เพื่อเริ่มสั่งอาหาร"}),(0,l.jsx)("button",{onClick:()=>C(!1),className:"px-6 py-3 bg-blue-400 text-white rounded-xl font-bold hover:bg-blue-500",children:"เลือกเมนู"})]}):(0,l.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,l.jsxs)("p",{className:"text-blue-600 font-bold text-lg",children:["฿",(e.price+e.selectedOptions.reduce((e,s)=>e+s.price,0)).toFixed(2)]}),e.selectedOptions.length>0&&(0,l.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.selectedOptions.map((s,t)=>(0,l.jsxs)("span",{children:[s.name," (+฿",s.price,")",t<e.selectedOptions.length-1?", ":""]},s.id))}),e.specialInstructions&&(0,l.jsxs)("div",{className:"text-sm text-gray-600 mt-1 italic",children:['"',e.specialInstructions,'"']})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center bg-white rounded-lg",children:[(0,l.jsx)("button",{onClick:()=>ee(e.id,e.quantity-1),className:"p-2 rounded-l-lg bg-gray-200 hover:bg-gray-300",children:(0,l.jsx)(h.A,{className:"h-5 w-5 text-gray-600"})}),(0,l.jsx)("span",{className:"px-4 py-2 font-bold text-lg",children:e.quantity}),(0,l.jsx)("button",{onClick:()=>ee(e.id,e.quantity+1),className:"p-2 rounded-r-lg bg-gray-200 hover:bg-gray-300",children:(0,l.jsx)(x.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,l.jsxs)("span",{className:"font-bold text-lg text-blue-600",children:["฿",((e.price+e.selectedOptions.reduce((e,s)=>e+s.price,0))*e.quantity).toFixed(2)]})]})]},"".concat(e.id,"-").concat(JSON.stringify(e.selectedOptions),"-").concat(e.specialInstructions)))})}),k.length>0&&(0,l.jsxs)("div",{className:"bg-gray-50 p-6 border-t",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("span",{className:"text-xl font-bold",children:"ยอดรวมทั้งสิ้น"}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["฿",T.toFixed(2)]})]}),(0,l.jsx)("button",{onClick:el,className:"w-full py-4 bg-blue-400 text-white rounded-xl text-xl font-bold hover:bg-blue-500 flex items-center justify-center shadow-lg",disabled:I,children:I?(0,l.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-white"}):(0,l.jsxs)(l.Fragment,{children:["ยืนยันการสั่งอาหาร ",(0,l.jsx)(u.A,{className:"h-6 w-6 ml-2"})]})})]})]})}),q&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"bg-blue-400 text-white p-6 rounded-t-2xl flex items-center",children:[(0,l.jsx)("button",{onClick:()=>E(null),className:"p-2 rounded-full hover:bg-blue-500 mr-4",children:(0,l.jsx)(m.A,{className:"h-6 w-6"})}),(0,l.jsx)("h2",{className:"text-xl font-bold",children:"ปรับแต่งรายการ"})]}),(0,l.jsxs)("div",{className:"p-6",children:[q.imageUrl&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("img",{src:q.imageUrl||"/placeholder.svg",alt:q.name,className:"w-full h-48 object-cover rounded-xl"})}),(0,l.jsx)("h3",{className:"font-bold text-xl mb-2",children:q.name}),q.description&&(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:q.description}),(0,l.jsxs)("p",{className:"text-blue-600 font-bold text-xl mb-6",children:["฿",q.price.toFixed(2)]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h4",{className:"font-bold text-lg mb-3",children:"จำนวน"}),(0,l.jsxs)("div",{className:"flex items-center justify-center bg-gray-100 rounded-xl p-2 w-fit mx-auto",children:[(0,l.jsx)("button",{onClick:()=>H(Math.max(1,G-1)),className:"p-3 rounded-lg bg-white hover:bg-gray-50 shadow-sm",children:(0,l.jsx)(h.A,{className:"h-5 w-5 text-gray-600"})}),(0,l.jsx)("span",{className:"px-6 py-3 font-bold text-xl",children:G}),(0,l.jsx)("button",{onClick:()=>H(G+1),className:"p-3 rounded-lg bg-white hover:bg-gray-50 shadow-sm",children:(0,l.jsx)(x.A,{className:"h-5 w-5 text-gray-600"})})]})]}),q.options&&q.options.length>0&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h4",{className:"font-bold text-lg mb-3",children:"ตัวเลือกเพิ่มเติม"}),(0,l.jsx)("div",{className:"space-y-3",children:q.options.map(e=>(0,l.jsx)("div",{className:"p-4 border-2 rounded-xl cursor-pointer transition-all ".concat(F.some(s=>s.id===e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),onClick:()=>ei(e),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("span",{className:"text-blue-600 font-bold",children:["+฿",e.price.toFixed(2)]})]})},e.id))})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h4",{className:"font-bold text-lg mb-3",children:"เพิ่มเติม"}),(0,l.jsx)("textarea",{placeholder:"เช่น ไม่ใส่ผัก, ไม่เผ็ด, เพิ่มน้ำแข็ง, ปรุงรสจืด",className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none resize-none",rows:3,value:M,onChange:e=>z(e.target.value)})]}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"font-bold text-lg",children:"ราคารวม"}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["฿",((q.price+F.reduce((e,s)=>e+s.price,0))*G).toFixed(2)]})]}),F.length>0&&(0,l.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["รวมตัวเลือก: ",F.map(e=>e.name).join(", ")]})]}),(0,l.jsxs)("button",{className:"w-full py-4 bg-blue-400 text-white rounded-xl text-xl font-bold hover:bg-blue-500 shadow-lg transition-colors",onClick:()=>$(q,F,M,G),children:["เพิ่มลงตะกร้า (",G," ชิ้น)"]})]})]})}),k.length>0&&!S&&(0,l.jsx)("div",{className:"fixed bottom-6 right-6 z-40",children:(0,l.jsxs)("button",{onClick:()=>C(!0),className:"bg-blue-400 text-white p-4 rounded-full shadow-2xl hover:bg-blue-500 transition-all transform hover:scale-110 relative",children:[(0,l.jsx)(c.A,{className:"h-8 w-8"}),(0,l.jsx)("span",{className:"absolute -top-2 -right-2 bg-yellow-400 text-blue-800 text-sm font-bold px-2 py-1 rounded-full min-w-[24px] h-6 flex items-center justify-center",children:k.reduce((e,s)=>e+s.quantity,0)}),(0,l.jsxs)("div",{className:"absolute -bottom-12 right-0 bg-white text-blue-600 px-3 py-1 rounded-lg shadow-lg font-bold text-sm whitespace-nowrap",children:["฿",T.toFixed(2)]})]})})]})}function f(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)().get("id");return((0,a.useEffect)(()=>{s||e.push("/")},[s,e]),s)?(0,l.jsx)(g,{}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"text-center p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"ไม่พบข้อมูลร้านอาหาร"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"กรุณาสแกน QR Code ใหม่อีกครั้ง"})]})})}},2723:(e,s,t)=>{Promise.resolve().then(t.bind(t,2457))},3052:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4186:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4616:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5610:(e,s,t)=>{"use strict";t.d(s,{H9:()=>r.H9,db:()=>o,j2:()=>d,x7:()=>r.x7});var l=t(3915),a=t(6203),r=t(5317),i=t(858),n=t(1427);let c=(0,l.Wp)({apiKey:"AIzaSyBdnWr8bkOF5oP2gSsjo9pXbrZbJO-QzDc",authDomain:"fastorder-8f143.firebaseapp.com",projectId:"fastorder-8f143",storageBucket:"fastorder-8f143.firebasestorage.app",messagingSenderId:"827965800193",appId:"1:827965800193:web:1d9ff91b5f6adb90bf6500",measurementId:"G-2LXXJM6W59"}),d=(0,a.xI)(c),o=(0,r.aU)(c);new a.HF,(0,i.c7)(c),(0,n.Uz)(c)},7712:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},7809:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},7924:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8564:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[992,122,234,432,441,684,358],()=>s(2723)),_N_E=e.O()}]);